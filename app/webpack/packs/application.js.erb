import 'rails-ujs';
// import './../javascripts/cable';

import Turbolinks from 'turbolinks';
Turbolinks.start();

import 'turbolinks-animate';
document.addEventListener( 'turbolinks:load', () => {
    TurbolinksAnimate.init({ element: document.querySelector('body.turbolinks-animate') });
})

import 'onsignal/dist/OneSignalSDK';
import OnSignal from 'onsignal';
function showSubscription() {
    document.querySelector('#subscribe a.myg-button').innerHTML = 'ðŸŽ‰ Thank you for subscribing! ðŸŽ‰';
}
document.addEventListener( 'turbolinks:load', () => { // change to 'ready'
    const onSignal = new OnSignal('<%= Settings.onesignal.app_id %>');
    if (onSignal.isSubscribed())
        showSubscription()
    else {
        document.querySelector('#subscribe a.myg-button').addEventListener( 'click', () => {
            onSignal.subscribe();
            showSubscription();
        });
    }
})

import './../javascripts/myg/index';

import './../javascripts/packages/repositories/show';


import './../stylesheets/index';
